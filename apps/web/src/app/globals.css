@import "tailwindcss";
@import "tw-animate-css";

@custom-variant dark (&:is(.dark *));

.card {
  @apply bg-[rgba(255,255,255,0.02)] border border-white/10 rounded-2xl p-5 backdrop-blur;
}


/* Palette + fonts (v4) */
:root {
  --color-accent: #ff5a5f;
  --color-flame: #ff7a1a;
  --color-bg: #0b0c10;
  --color-fg: #f2f2f2;

  --font-title: system-ui;
  --font-sans: system-ui;
  --radius: 0.625rem;
  --background: oklch(1 0 0);
  --foreground: oklch(0.145 0 0);
  --card: oklch(1 0 0);
  --card-foreground: oklch(0.145 0 0);
  --popover: oklch(1 0 0);
  --popover-foreground: oklch(0.145 0 0);
  --primary: oklch(0.205 0 0);
  --primary-foreground: oklch(0.985 0 0);
  --secondary: oklch(0.97 0 0);
  --secondary-foreground: oklch(0.205 0 0);
  --muted: oklch(0.97 0 0);
  --muted-foreground: oklch(0.556 0 0);
  --accent: oklch(0.97 0 0);
  --accent-foreground: oklch(0.205 0 0);
  --destructive: oklch(0.577 0.245 27.325);
  --border: oklch(0.922 0 0);
  --input: oklch(0.922 0 0);
  --ring: oklch(0.708 0 0);
  --chart-1: oklch(0.646 0.222 41.116);
  --chart-2: oklch(0.6 0.118 184.704);
  --chart-3: oklch(0.398 0.07 227.392);
  --chart-4: oklch(0.828 0.189 84.429);
  --chart-5: oklch(0.769 0.188 70.08);
  --sidebar: oklch(0.985 0 0);
  --sidebar-foreground: oklch(0.145 0 0);
  --sidebar-primary: oklch(0.205 0 0);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.97 0 0);
  --sidebar-accent-foreground: oklch(0.205 0 0);
  --sidebar-border: oklch(0.922 0 0);
  --sidebar-ring: oklch(0.708 0 0);
}

html, body { background: var(--color-bg); color: var(--color-fg); }

.card {
  @apply border rounded-2xl p-5 backdrop-blur transition;
  background: rgba(255,255,255,0.03);
  border-color: rgba(255,255,255,0.1);
}

/* Arrière-plan déjà présent (bruit + triangles) – garde tes classes .bg-noise / .triangles */

/* Petits helpers */
.badge {
  @apply text-xs px-2 py-1 rounded-full border;
  border-color: rgba(255,255,255,0.15);
}

/* Palette */
:root {
  --bg: #07080b;
  --fg: #f4f4f6;
  --muted: #a8acb4;

  --accent: #ff5a5f;   /* rose/rouge */
  --flame:  #ff7a1a;   /* orange */
  --vio:    #7a5cff;   /* violet */
  --cyan:   #34d8ff;   /* cyan */
}

html, body { background: var(--bg); color: var(--fg); }

/* Container width helper */
.container { max-width: 72rem; margin-inline: auto; }

/* Neon border + glow */
.neon {
  position: relative;
  border: 1px solid color-mix(in srgb, var(--accent) 45%, transparent);
  background: color-mix(in srgb, #0b0d12 85%, var(--accent) 15%);
  backdrop-filter: blur(6px);
}
.neon::after {
  content: "";
  position: absolute; inset: 0;
  pointer-events: none;
  box-shadow: 0 0 32px 4px color-mix(in srgb, var(--accent) 30%, transparent) inset,
              0 0 28px 2px color-mix(in srgb, var(--accent) 30%, transparent);
  opacity: .6;
  border-radius: inherit;
}

/* Cards / Panels */
.card { @apply rounded-2xl p-5; }
.card.neon { @apply shadow-lg; }

/* Badges */
.badge {
  @apply text-xs px-2 py-1 rounded-full border;
  border-color: color-mix(in srgb, var(--fg) 20%, transparent);
  background: color-mix(in srgb, #090b10 70%, var(--vio) 30%);
}
.badge-green {@apply text-xs px-2 py-1 rounded-full border ; background: color-mix(in srgb, #0b1210 70%, #27ffa8 30%); color:#ffffff;border-color: color-mix(in srgb, var(--fg) 20%, transparent); }
.badge-red   {@apply text-xs px-2 py-1 rounded-full border; background: color-mix(in srgb, #140b0b 70%, #ff6b6b 30%); color:#ffffff; border-color: color-mix(in srgb, var(--fg) 20%, transparent); }

/* Animated gradient line (under titles) */
.title-underline {
  position: relative; display: inline-block;
}
.title-underline::after{
  content: ""; position: absolute; left: 0; right: 0; bottom: -8px; height: 3px;
  background: linear-gradient(90deg, var(--flame), var(--accent), var(--vio), var(--cyan));
  background-size: 300% 100%;
  animation: flow 6s ease-in-out infinite alternate;
  border-radius: 999px; opacity: .8;
}
@keyframes flow { from{ background-position: 0% } to{ background-position: 100% } }

/* Subtle hover lift */
.lift { transition: transform .2s ease, filter .2s ease; }
.lift:hover { transform: translateY(-2px); filter: brightness(1.07); }

/* Divider neon */
.hr-neon {
  height: 1px; width: 100%;
  background: linear-gradient(90deg, transparent, color-mix(in srgb, var(--accent) 50%, transparent), transparent);
  opacity:.7;
}

/* Reduce motion accessibility */
@media (prefers-reduced-motion: reduce) {
  .lift, .title-underline::after { animation: none !important; transition: none !important; }
}

header {
  background-image: linear-gradient(90deg, color-mix(in srgb, var(--flame) 10%, transparent), color-mix(in srgb, var(--accent) 10%, transparent));
  background-size: 200% 100%;
  animation: headerflow 8s ease-in-out infinite alternate;
  border-bottom: 1px solid color-mix(in srgb, var(--fg) 10%, transparent);
}
@keyframes headerflow { from{background-position:0% 0} to{background-position:100% 0} }

.flash {
  animation: flashGlow 0.8s ease;
}
@keyframes flashGlow {
  0%   { background-color: color-mix(in srgb, var(--cyan) 30%, transparent); }
  100% { background-color: transparent; }
}

/* Flash accent (rose/orange) pour les cartes */
.flash-accent {
  animation: flashAccent 0.8s ease;
}
@keyframes flashAccent {
  0%   { background-color: color-mix(in srgb, var(--accent) 25%, transparent); }
  100% { background-color: transparent; }
}

:root {
  --accent: #38a9bd;   /* bleu-vert par défaut */
  --vio:    #7a5cff;   /* violet */
  --cyan:   #34d8ff;   /* cyan */
  --flame:  #ff7a1a;   /* orange/ambre pour les highlights */
}

/* Thème VIOLET : accent violet, cyan en secondaire */
[data-theme="violet"] {
  --accent: #9d4edd;   /* accent principal */
  --vio:    #9d4edd;
  --cyan:   #34d8ff;
  --flame:  #ff7a1a;
}

/* Thème BLEU-VERT (ancien "rose" dans ton toggle) : accent cyan/teal, violet en secondaire */
[data-theme="rose"] {
  --accent: #12d6df;     /* TEAL/CYAN néon (accent principal) */
  --vio:    #3a7bd5;     /* BLEU électrique (secondaire)      */
  --cyan:   #1ef7b5;     /* VERT-TEAL néon (punch/contraste)  */
  --flame:  #ff7a1a;     /* ambre pour les highlights          */
}

/* Neon toggle switch */
.switch {
  --w: 48px; --h: 28px; --p: 3px;
  width: var(--w); height: var(--h); border-radius: 999px; position: relative;
  background: color-mix(in srgb, var(--accent) 25%, transparent);
  border: 1px solid color-mix(in srgb, var(--accent) 45%, transparent);
  box-shadow: inset 0 0 12px color-mix(in srgb, var(--accent) 25%, transparent);
  transition: background .25s ease, border-color .25s ease, box-shadow .25s ease;
}
.switch::after{
  content:""; position:absolute; top: var(--p); left: var(--p);
  width: calc(var(--h) - var(--p)*2); height: calc(var(--h) - var(--p)*2);
  border-radius: 999px; background: white;
  box-shadow: 0 2px 8px rgba(0,0,0,.35), 0 0 8px color-mix(in srgb, var(--accent) 35%, transparent);
  transform: translateX(0); transition: transform .25s ease, background .25s ease, box-shadow .25s ease;
}
.switch[aria-checked="true"]{
  background: color-mix(in srgb, var(--accent) 45%, transparent);
  box-shadow: inset 0 0 18px color-mix(in srgb, var(--accent) 45%, transparent);
}
.switch[aria-checked="true"]::after{
  transform: translateX(calc(var(--w) - var(--h)));
  box-shadow: 0 2px 8px rgba(0,0,0,.35), 0 0 14px color-mix(in srgb, var(--accent) 55%, transparent);
}
.switch:focus-visible{ outline: none; box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 45%, transparent); }

/* Champ avec icône à gauche */
.input-icon { padding-left: 2.5rem !important; }   /* 2.5rem ≈ pl-10 */
.input-wrap { position: relative; }
.input-wrap .icon-left {
  position: absolute; left: .75rem; top: 50%; transform: translateY(-50%);
  pointer-events: none; opacity: .7;
}

/* ===== Inputs unifiés (input, select, textarea, date/time) ===== */
.input,
select.input,
textarea.input,
input[type="text"].input,
input[type="email"].input,
input[type="tel"].input,
input[type="number"].input,
input[type="search"].input,
input[type="datetime-local"].input,
input[type="date"].input,
input[type="time"].input {
  @apply w-full rounded-xl px-3 py-2 transition border;
  background: var(--field-bg);
  border-color: var(--field-border);
  color: var(--fg);
}

.input::placeholder { color: var(--field-placeholder); }

.input:focus {
  outline: none;
  box-shadow: 0 0 0 3px var(--field-ring);
}

.input:hover {
  border-color: color-mix(in srgb, var(--fg) 18%, transparent);
}

/* Selects: caret + remove native oddities */
select.input {
  background-image: none;
}

/* Disabled */
.input:disabled {
  opacity: .6;
  cursor: not-allowed;
}

.input--neutral {
  --field-bg: #0c0f14; /* sombre fixe */
  --field-ring: color-mix(in srgb, var(--fg) 20%, transparent); /* anneau gris clair */
}

/* Erreur / invalide */
.input--invalid {
  --field-ring: color-mix(in srgb, #ff6b6b 50%, transparent);
  border-color: color-mix(in srgb, #ff6b6b 35%, transparent);
}

/* Fantôme (fond ultra léger, utile dans des cartes sombres) */
.input-ghost {
  --field-bg: color-mix(in srgb, #0b0d12 96%, var(--accent) 4%);
  --field-border: color-mix(in srgb, var(--fg) 8%, transparent);
}
/* Icône à gauche déjà gérée par .input-icon/.input-wrap */


/* Surlignage néon pour les résultats de recherche */
.mark-neon {
  background: color-mix(in srgb, var(--accent) 35%, transparent);
  color: var(--fg);
  padding: .05rem .2rem;
  border-radius: .35rem;
  box-shadow: 0 0 10px color-mix(in srgb, var(--accent) 45%, transparent);
}

.dark {
  --background: oklch(0.145 0 0);
  --foreground: oklch(0.985 0 0);
  --card: oklch(0.205 0 0);
  --card-foreground: oklch(0.985 0 0);
  --popover: oklch(0.205 0 0);
  --popover-foreground: oklch(0.985 0 0);
  --primary: oklch(0.922 0 0);
  --primary-foreground: oklch(0.205 0 0);
  --secondary: oklch(0.269 0 0);
  --secondary-foreground: oklch(0.985 0 0);
  --muted: oklch(0.269 0 0);
  --muted-foreground: oklch(0.708 0 0);
  --accent: oklch(0.269 0 0);
  --accent-foreground: oklch(0.985 0 0);
  --destructive: oklch(0.704 0.191 22.216);
  --border: oklch(1 0 0 / 10%);
  --input: oklch(1 0 0 / 15%);
  --ring: oklch(0.556 0 0);
  --chart-1: oklch(0.488 0.243 264.376);
  --chart-2: oklch(0.696 0.17 162.48);
  --chart-3: oklch(0.769 0.188 70.08);
  --chart-4: oklch(0.627 0.265 303.9);
  --chart-5: oklch(0.645 0.246 16.439);
  --sidebar: oklch(0.205 0 0);
  --sidebar-foreground: oklch(0.985 0 0);
  --sidebar-primary: oklch(0.488 0.243 264.376);
  --sidebar-primary-foreground: oklch(0.985 0 0);
  --sidebar-accent: oklch(0.269 0 0);
  --sidebar-accent-foreground: oklch(0.985 0 0);
  --sidebar-border: oklch(1 0 0 / 10%);
  --sidebar-ring: oklch(0.556 0 0);
}

@layer base {
  *, ::before, ::after {
    /* use your existing CSS vars instead of Tailwind tokens */
    border-color: var(--border);
    outline-color: color-mix(in srgb, var(--ring) 50%, transparent);
  }
  body {
    background: var(--background);
    color: var(--foreground);
  }
}

/* --- PRINT ONLY --- */
@media print {
  /* fond blanc & texte noir pour lisibilité */
  html, body { background: #fff !important; color: #000 !important; }
  /* cache la navbar / boutons / éléments décoratifs */
  header, .no-print, .btn, .btn-ghost { display: none !important; }
  /* cartes/ombres neutralisées */
  .card, .neon, .lift { background: #fff !important; box-shadow: none !important; border: 1px solid #000 !important; }
  /* liens sobres */
  a { color: #000 !important; text-decoration: none !important; }
  /* page A4 marges */
  @page { size: A4; margin: 12mm; }
}

/* meilleure lisibilité à l’écran pour la page print */
.print-page {
  background: #0b0b0f;
}
.print-sheet {
  background: rgba(255,255,255,0.02);
  border: 1px solid rgba(255,255,255,0.06);
  border-radius: 12px;
  padding: 16px;
}
.print-table {
  width: 100%;
  border-collapse: collapse;
  font-size: 14px;
}
.print-table th, .print-table td {
  border-bottom: 1px dashed rgba(255,255,255,0.15);
  padding: 8px 6px;
  vertical-align: top;
}
.print-table th {
  text-align: left;
  opacity: .8;
  font-weight: 700;
}
.print-note {
  opacity: .8;
  font-size: 12px;
  white-space: pre-wrap;
}

/* === Neon Green helpers (items rendus) === */
:root {
  --neon-green: #27ffa8;             /* vert néon principal */
  --neon-green-soft: color-mix(in srgb, #0b1210 82%, var(--neon-green) 18%);
  --neon-green-border: color-mix(in srgb, var(--neon-green) 45%, transparent);
  --neon-green-glow: color-mix(in srgb, var(--neon-green) 50%, transparent);
}

/* Champs (valeurs par défaut, thémables) */
:root {
  /* fond et bordure discrets, pas de vert forcé */
  --field-bg: color-mix(in srgb, #0b0d12 92%, var(--accent) 8%);
  --field-border: color-mix(in srgb, var(--fg) 10%, transparent);
  --field-placeholder: color-mix(in srgb, var(--fg) 45%, transparent);
  /* anneau au focus = accent du thème (violet/teal selon [data-theme]) */
  --field-ring: color-mix(in srgb, var(--accent) 35%, transparent);
}

/* Si tu veux un fond encore plus neutre (moins d’accent), dé-commente:
:root { --field-bg: color-mix(in srgb, #0b0d12 96%, var(--accent) 4%); }
*/

/* Variantes par thème (optionnel, déjà correct par défaut) */
/* Exemple : thème "violet" => anneau un poil plus punchy */
[data-theme="violet"] {
  --field-ring: color-mix(in srgb, var(--vio) 40%, transparent);
}
/* Exemple : thème "rose/teal" */
[data-theme="rose"] {
  --field-ring: color-mix(in srgb, var(--accent) 42%, transparent);
}

/* halo + fond doux pour les items returned */
.neon-green-soft {
  background: var(--neon-green-soft);
  border-color: var(--neon-green-border) !important;
  position: relative;
}
.neon-green-soft::after {
  content: "";
  position: absolute; inset: 0; pointer-events: none;
  box-shadow: 0 0 24px 2px var(--neon-green-glow) inset,
              0 0 20px 2px var(--neon-green-glow);
  border-radius: inherit; opacity: .55;
}

/* texte vert néon + petit glow lisible */
.text-neon-green { color: var(--neon-green); }
.glow-green { text-shadow: 0 0 6px var(--neon-green-glow); }

/* badge néon pour "Tout rendu" */
.badge-returned-neon {
  @apply text-xs px-2 py-1 rounded-full border font-semibold;
  color: #052a1f;
  background: color-mix(in srgb, white 10%, var(--neon-green) 90%);
  border-color: var(--neon-green-border);
  box-shadow: 0 0 18px 2px var(--neon-green-glow);
}


button:disabled {
  opacity: .4;
  cursor: not-allowed;
  pointer-events: none;
}

:root {
  --btn-radius: 0.75rem;

  /* Solid (par défaut) */
  --btn-bg: var(--accent);
  --btn-fg: #0b0d12; /* texte sombre sur accent vif = très lisible */
  --btn-border: color-mix(in srgb, var(--accent) 55%, transparent);
  --btn-shadow:
    0 10px 35px -15px rgba(0,0,0,.6),
    0 0 22px 2px color-mix(in srgb, var(--accent) 26%, transparent);

  /* Focus ring (reprend l’accent) */
  --btn-ring: color-mix(in srgb, var(--accent) 45%, transparent);

  /* Ghost / Outline */
  --btn-ghost-fg: var(--fg);
  --btn-ghost-border: color-mix(in srgb, var(--fg) 15%, transparent);
  --btn-ghost-bg: color-mix(in srgb, transparent 90%, var(--vio) 10%);

  --btn-outline-fg: var(--accent);
  --btn-outline-border: color-mix(in srgb, var(--accent) 50%, transparent);
  --btn-outline-bg: color-mix(in srgb, var(--accent) 10%, transparent);

  /* Subtle / Secondary */
  --btn-subtle-fg: var(--fg);
  --btn-subtle-bg: color-mix(in srgb, #0b0d12 92%, var(--accent) 8%);
  --btn-subtle-border: color-mix(in srgb, var(--fg) 10%, transparent);

  /* Destructive / Success (optionnel) */
  --btn-danger: #ff6b6b;
  --btn-success: #27ffa8;
}

/* Variantes par thème (optionnel ; déjà bien par défaut) */
[data-theme="violet"] {
  --btn-ring: color-mix(in srgb, var(--vio) 55%, transparent);
}
[data-theme="rose"] {
  --btn-ring: color-mix(in srgb, var(--accent) 55%, transparent);
}

/* ===== Bouton de base ===== */
.btn {
  @apply inline-flex items-center gap-2 font-semibold transition select-none;
  @apply px-4 py-2 rounded-xl; /* radius cohérent */
  position: relative;
  border: 1px solid var(--btn-border);
  background: var(--btn-bg);
  color: var(--btn-fg);
  box-shadow: var(--btn-shadow);
  will-change: transform, filter, box-shadow, background, border-color;
}

.btn:hover { filter: brightness(1.07); transform: translateY(-1px); }
.btn:active { transform: translateY(0) scale(.99); }
.btn:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--btn-ring), var(--btn-shadow); }

/* Désactivé */
.btn:disabled,
.btn[disabled] {
  opacity: .5;
  pointer-events: none;
}

/* Tailles */
.btn-sm { @apply px-3 py-1.5 text-sm rounded-lg; }
.btn-lg { @apply px-5 py-2.5 text-base rounded-2xl; }

/* Icône seule (carré) */
.btn-icon {
  @apply p-2 rounded-xl;
  width: 2.5rem; height: 2.5rem;
  display: inline-grid; place-items: center;
}

/* Full width utilitaire */
.btn-block { @apply w-full justify-center; }

/* ===== Variantes ===== */

/* Ghost (fond quasi transparent, bord discret) */
.btn-ghost {
  @apply inline-flex items-center gap-2 font-medium transition select-none;
  @apply px-4 py-2 rounded-xl;
  background: var(--btn-ghost-bg);
  color: var(--btn-ghost-fg);
  border: 1px solid var(--btn-ghost-border);
}
.btn-ghost:hover { border-color: color-mix(in srgb, var(--fg) 25%, transparent); filter: brightness(1.05); }
.btn-ghost:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--btn-ring); }

/* Outline (texte accent, bord accent, léger wash au hover) */
.btn-outline {
  @apply inline-flex items-center gap-2 font-semibold transition select-none;
  @apply px-4 py-2 rounded-xl;
  color: var(--btn-outline-fg);
  background: transparent;
  border: 1px solid var(--btn-outline-border);
}
.btn-outline:hover { background: var(--btn-outline-bg); }
.btn-outline:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--btn-ring); }

/* Subtle (fond sombre doux, cohérent avec inputs) */
.btn-subtle {
  @apply inline-flex items-center gap-2 font-semibold transition select-none;
  @apply px-4 py-2 rounded-xl;
  color: var(--btn-subtle-fg);
  background: var(--btn-subtle-bg);
  border: 1px solid var(--btn-subtle-border);
}
.btn-subtle:hover { filter: brightness(1.06); }
.btn-subtle:focus-visible { outline: none; box-shadow: 0 0 0 3px var(--btn-ring); }

/* Destructive */
.btn-danger {
  --btn-bg: color-mix(in srgb, var(--btn-danger) 85%, #3b0f0f 15%);
  --btn-fg: #140606;
  --btn-border: color-mix(in srgb, var(--btn-danger) 55%, transparent);
  --btn-ring: color-mix(in srgb, var(--btn-danger) 50%, transparent);
}

/* Success */
.btn-success {
  --btn-bg: color-mix(in srgb, var(--btn-success) 85%, #0b1210 15%);
  --btn-fg: #041c15;
  --btn-border: color-mix(in srgb, var(--btn-success) 55%, transparent);
  --btn-ring: color-mix(in srgb, var(--btn-success) 45%, transparent);
}

/* ===== États utilitaires ===== */

/* Loading simple: rotation de l’icône svg si présente */
.btn.is-loading svg { animation: spin 1s linear infinite; }
@keyframes spin { to { transform: rotate(360deg) } }

/* Groupe de boutons */
.btn-group > .btn { border-radius: 0; }
.btn-group > .btn:first-child { border-top-left-radius: var(--btn-radius); border-bottom-left-radius: var(--btn-radius); }
.btn-group > .btn:last-child  { border-top-right-radius: var(--btn-radius); border-bottom-right-radius: var(--btn-radius); }

/* Bouton "ton sur ton" pour header, etc. */
.btn-tonal {
  --btn-bg: color-mix(in srgb, #0b0d12 88%, var(--accent) 12%);
  --btn-fg: var(--fg);
  --btn-border: color-mix(in srgb, var(--accent) 35%, transparent);
  --btn-ring: color-mix(in srgb, var(--accent) 40%, transparent);
}